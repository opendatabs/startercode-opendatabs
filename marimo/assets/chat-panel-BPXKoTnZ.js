import{r as f,dG as Z,dH as Wt,j as o,dI as Ft,dJ as te,dK as ie,dL as $,dM as q,dN as Ut,dO as Xt,a as D,I as V,L as J,bc as Yt,M as Bt,cS as Ue,dP as Vt,u as $t,Q as qt,bH as Jt,p as Qt,aO as W,H as Kt,bn as Gt,B as ce,bm as Zt,bs as er,dQ as tr,dR as rr,dS as Xe,dT as fe,dU as Ye,dV as Be,dW as Ve,dX as or,bV as nr,dY as $e,dZ as sr,d_ as ar,d$ as lr,e0 as ir,e1 as cr,e2 as dr,e3 as mr,cA as Q,am as ur,cd as pr,e4 as hr,al as fr,e5 as xr,e6 as gr,e7 as vr,S as wr,e8 as br,e9 as qe,ea as Je,eb as Qe,E as yr,ec as jr,ed as Ke,C as Nr,ee as Sr,ef as Cr,eg as _r,eh as Er,ei as Rr,ej as Tr,ap as ee,ek as kr,bF as Ar,el as Pr,em as Ir,en as Lr,eo as zr,ep as Dr,V as Mr,eq as Or,ac as Hr,ad as Wr,d2 as Fr,ae as Ur,d0 as Xr,__tla as Yr}from"./index-OC46250R.js";import{e as Ge,g as Br,__tla as Vr}from"./edit-page-DJ8kJZ9w.js";import{d as $r,u as Ze}from"./links-CbvGxbsJ.js";import{P as et}from"./empty-state-BIBXzY_0.js";import{I as qr,__tla as Jr}from"./storage-CGlP4lCF.js";import{u as Qr,r as Kr,a as Gr,V as Zr,b as eo,v as to,t as ro,c as xe,d as oo}from"./index-DcCIe7np.js";import{B as no}from"./between-horizontal-start-FyewyCGn.js";import"./_createAggregator-Bn38fDd3.js";import"./_baseEach-C1FLm7WW.js";import{__tla as so}from"./loro_wasm_bg-C1ks32Vm.js";import"./index-Dt9UWeWn.js";import"./index-BAH034Ue.js";import"./index-DqzMPAC8.js";import"./index-DSU75csX.js";import"./index-CSgxTUzD.js";import"./index-BLu5CX6z.js";import"./index-B8llrTSo.js";import"./index-CPN7TRA1.js";import"./index-BFSnz7iM.js";import"./index-Bq516OmX.js";import"./index-CB2pnVQG.js";import"./index-DWOaniGT.js";import"./index-c6If577Q.js";import"./apl-CXdQSnD-.js";import"./asciiarmor-D5V0T9Cu.js";import"./asn1-DWPaVWf6.js";import"./brainfuck-CtZaYBKt.js";import"./cobol-stawOqaz.js";import"./clike-BgBwzOhw.js";import"./clojure-DiuoqK-z.js";import"./css-ZjFoif2m.js";import"./cmake-DXn5xaP-.js";import"./coffeescript-BTDxI-eT.js";import"./commonlisp-vq6DHwts.js";import"./cypher-gJDei3ni.js";import"./python-DD-Q2bae.js";import"./crystal-CRzZ78HM.js";import"./d-BShv7fp-.js";import"./diff-UJJ5BM9S.js";import"./dtd-DI9Herc-.js";import"./dylan-DkEP81N9.js";import"./ecl-DPFc0Uaf.js";import"./eiffel-DR5c0IrL.js";import"./elm-DompmV0j.js";import"./erlang-BuqgqA5h.js";import"./factor-CFXhaUWb.js";import"./simple-mode-C3vEBAcb.js";import"./forth-POgR1ypr.js";import"./fortran-DL7KluxX.js";import"./mllike-3c2dg9RT.js";import"./gas-bV0CklSb.js";import"./gherkin-B6X1vGSW.js";import"./groovy-DnIzCrpZ.js";import"./haskell-CLQs6EAM.js";import"./haxe-D25e-2l-.js";import"./idl-pcmmZuaN.js";import"./javascript-BpzJj0-u.js";import"./jinja2-DhgKlfW7.js";import"./julia-DjdwvFuI.js";import"./livescript-HO6ttBFx.js";import"./lua-8DXOpKDz.js";import"./mirc-DkvFAiy5.js";import"./mathematica-IIbmv7SK.js";import"./modelica-DSrSSXCg.js";import"./mumps-zvxmGV4l.js";import"./mbox-z_N2Mo3d.js";import"./nsis-BvKfQ9lQ.js";import"./ntriples-BSwWqoLa.js";import"./octave-C4hdQ5Hf.js";import"./oz-qQq7irPq.js";import"./pascal-CafrKXZF.js";import"./perl-tdMlh9QA.js";import"./pig-CwGJVRC4.js";import"./powershell-D1ly3AHC.js";import"./properties-_nPj978X.js";import"./protobuf-B4y9do6W.js";import"./pug-BTvK5tSS.js";import"./puppet-Bc-yJKzi.js";import"./q-B0kTJ4cI.js";import"./r-BA4EbLKE.js";import"./rpm-DI_rRufH.js";import"./ruby-CR-u2WLS.js";import"./sas-Bqaci40L.js";import"./scheme-qjP0V5Ag.js";import"./shell-BLav31RL.js";import"./sieve-r025o_jW.js";import"./smalltalk-C7J3IyEP.js";import"./sparql-BRLJFz69.js";import"./stylus-Bdo_Aemu.js";import"./swift-B_XXVlXX.js";import"./verilog-B4LBqg_1.js";import"./tcl-B2fODqDH.js";import"./textile-BuVhTOzU.js";import"./toml-wcPdHu67.js";import"./troff-Ce85hlLp.js";import"./ttcn-BxnYHtq8.js";import"./ttcn-cfg-CKJxb-l2.js";import"./turtle-BkSuIpt-.js";import"./webidl-CGwyPRYs.js";import"./vb-BHgjm0DN.js";import"./vbscript-Dawdd5GZ.js";import"./velocity-BdD_26Jv.js";import"./vhdl-CWWH2SUo.js";import"./xquery-CVDBqZPY.js";import"./yacas-I8QjZlxf.js";import"./z80-D8p3gKXp.js";import"./mscgen-B2igx18G.js";import"./index-DMomwMcN.js";import"./trash-UBqfK4mR.js";let tt,ao=Promise.all([(()=>{try{return Yr}catch{}})(),(()=>{try{return Vr}catch{}})(),(()=>{try{return Jr}catch{}})(),(()=>{try{return so}catch{}})()]).then(async()=>{var de="ScrollArea",[ge,lo]=Ft(de),[rt,M]=ge(de),ve=f.forwardRef((r,e)=>{const{__scopeScrollArea:t,type:s="hover",dir:n,scrollHideDelay:a=600,...l}=r,[i,c]=f.useState(null),[m,d]=f.useState(null),[u,p]=f.useState(null),[h,g]=f.useState(null),[b,v]=f.useState(null),[x,y]=f.useState(0),[_,S]=f.useState(0),[E,C]=f.useState(!1),[k,T]=f.useState(!1),N=Z(e,L=>c(L)),A=Wt(n);return o.jsx(rt,{scope:t,type:s,dir:A,scrollHideDelay:a,scrollArea:i,viewport:m,onViewportChange:d,content:u,onContentChange:p,scrollbarX:h,onScrollbarXChange:g,scrollbarXEnabled:E,onScrollbarXEnabledChange:C,scrollbarY:b,onScrollbarYChange:v,scrollbarYEnabled:k,onScrollbarYEnabledChange:T,onCornerWidthChange:y,onCornerHeightChange:S,children:o.jsx(te.div,{dir:A,...l,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":_+"px",...r.style}})})});ve.displayName=de;var we="ScrollAreaViewport",be=f.forwardRef((r,e)=>{const{__scopeScrollArea:t,children:s,nonce:n,...a}=r,l=M(we,t),i=f.useRef(null),c=Z(e,i,l.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),o.jsx(te.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:l.scrollbarXEnabled?"scroll":"hidden",overflowY:l.scrollbarYEnabled?"scroll":"hidden",...r.style},children:o.jsx("div",{ref:l.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});be.displayName=we;var F="ScrollAreaScrollbar",me=f.forwardRef((r,e)=>{const{forceMount:t,...s}=r,n=M(F,r.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:l}=n,i=r.orientation==="horizontal";return f.useEffect(()=>(i?a(!0):l(!0),()=>{i?a(!1):l(!1)}),[i,a,l]),n.type==="hover"?o.jsx(ot,{...s,ref:e,forceMount:t}):n.type==="scroll"?o.jsx(nt,{...s,ref:e,forceMount:t}):n.type==="auto"?o.jsx(ye,{...s,ref:e,forceMount:t}):n.type==="always"?o.jsx(ue,{...s,ref:e}):null});me.displayName=F;var ot=f.forwardRef((r,e)=>{const{forceMount:t,...s}=r,n=M(F,r.__scopeScrollArea),[a,l]=f.useState(!1);return f.useEffect(()=>{const i=n.scrollArea;let c=0;if(i){const m=()=>{window.clearTimeout(c),l(!0)},d=()=>{c=window.setTimeout(()=>l(!1),n.scrollHideDelay)};return i.addEventListener("pointerenter",m),i.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),i.removeEventListener("pointerenter",m),i.removeEventListener("pointerleave",d)}}},[n.scrollArea,n.scrollHideDelay]),o.jsx(ie,{present:t||a,children:o.jsx(ye,{"data-state":a?"visible":"hidden",...s,ref:e})})}),nt=f.forwardRef((r,e)=>{const{forceMount:t,...s}=r,n=M(F,r.__scopeScrollArea),a=r.orientation==="horizontal",l=se(()=>c("SCROLL_END"),100),[i,c]=(m="hidden",d={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},f.useReducer((u,p)=>d[u][p]??u,m));var m,d;return f.useEffect(()=>{if(i==="idle"){const u=window.setTimeout(()=>c("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(u)}},[i,n.scrollHideDelay,c]),f.useEffect(()=>{const u=n.viewport,p=a?"scrollLeft":"scrollTop";if(u){let h=u[p];const g=()=>{const b=u[p];h!==b&&(c("SCROLL"),l()),h=b};return u.addEventListener("scroll",g),()=>u.removeEventListener("scroll",g)}},[n.viewport,a,c,l]),o.jsx(ie,{present:t||i!=="hidden",children:o.jsx(ue,{"data-state":i==="hidden"?"hidden":"visible",...s,ref:e,onPointerEnter:$(r.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:$(r.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),ye=f.forwardRef((r,e)=>{const t=M(F,r.__scopeScrollArea),{forceMount:s,...n}=r,[a,l]=f.useState(!1),i=r.orientation==="horizontal",c=se(()=>{if(t.viewport){const m=t.viewport.offsetWidth<t.viewport.scrollWidth,d=t.viewport.offsetHeight<t.viewport.scrollHeight;l(i?m:d)}},10);return K(t.viewport,c),K(t.content,c),o.jsx(ie,{present:s||a,children:o.jsx(ue,{"data-state":a?"visible":"hidden",...n,ref:e})})}),ue=f.forwardRef((r,e)=>{const{orientation:t="vertical",...s}=r,n=M(F,r.__scopeScrollArea),a=f.useRef(null),l=f.useRef(0),[i,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),m=_e(i.viewport,i.content),d={...s,sizes:i,onSizesChange:c,hasThumb:m>0&&m<1,onThumbChange:p=>a.current=p,onThumbPointerUp:()=>l.current=0,onThumbPointerDown:p=>l.current=p};function u(p,h){return(function(g,b,v,x="ltr"){const y=ne(v),_=y/2,S=b||_,E=y-S,C=v.scrollbar.paddingStart+S,k=v.scrollbar.size-v.scrollbar.paddingEnd-E,T=v.content-v.viewport,N=x==="ltr"?[0,T]:[-1*T,0];return Re([C,k],N)(g)})(p,l.current,i,h)}return t==="horizontal"?o.jsx(st,{...d,ref:e,onThumbPositionChange:()=>{if(n.viewport&&a.current){const p=Ee(n.viewport.scrollLeft,i,n.dir);a.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:p=>{n.viewport&&(n.viewport.scrollLeft=p)},onDragScroll:p=>{n.viewport&&(n.viewport.scrollLeft=u(p,n.dir))}}):t==="vertical"?o.jsx(at,{...d,ref:e,onThumbPositionChange:()=>{if(n.viewport&&a.current){const p=Ee(n.viewport.scrollTop,i);a.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:p=>{n.viewport&&(n.viewport.scrollTop=p)},onDragScroll:p=>{n.viewport&&(n.viewport.scrollTop=u(p))}}):null}),st=f.forwardRef((r,e)=>{const{sizes:t,onSizesChange:s,...n}=r,a=M(F,r.__scopeScrollArea),[l,i]=f.useState(),c=f.useRef(null),m=Z(e,c,a.onScrollbarXChange);return f.useEffect(()=>{c.current&&i(getComputedStyle(c.current))},[c]),o.jsx(Ne,{"data-orientation":"horizontal",...n,ref:m,sizes:t,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ne(t)+"px",...r.style},onThumbPointerDown:d=>r.onThumbPointerDown(d.x),onDragScroll:d=>r.onDragScroll(d.x),onWheelScroll:(d,u)=>{if(a.viewport){const p=a.viewport.scrollLeft+d.deltaX;r.onWheelScroll(p),Te(p,u)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&l&&s({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:oe(l.paddingLeft),paddingEnd:oe(l.paddingRight)}})}})}),at=f.forwardRef((r,e)=>{const{sizes:t,onSizesChange:s,...n}=r,a=M(F,r.__scopeScrollArea),[l,i]=f.useState(),c=f.useRef(null),m=Z(e,c,a.onScrollbarYChange);return f.useEffect(()=>{c.current&&i(getComputedStyle(c.current))},[c]),o.jsx(Ne,{"data-orientation":"vertical",...n,ref:m,sizes:t,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ne(t)+"px",...r.style},onThumbPointerDown:d=>r.onThumbPointerDown(d.y),onDragScroll:d=>r.onDragScroll(d.y),onWheelScroll:(d,u)=>{if(a.viewport){const p=a.viewport.scrollTop+d.deltaY;r.onWheelScroll(p),Te(p,u)&&d.preventDefault()}},onResize:()=>{c.current&&a.viewport&&l&&s({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:oe(l.paddingTop),paddingEnd:oe(l.paddingBottom)}})}})}),[lt,je]=ge(F),Ne=f.forwardRef((r,e)=>{const{__scopeScrollArea:t,sizes:s,hasThumb:n,onThumbChange:a,onThumbPointerUp:l,onThumbPointerDown:i,onThumbPositionChange:c,onDragScroll:m,onWheelScroll:d,onResize:u,...p}=r,h=M(F,t),[g,b]=f.useState(null),v=Z(e,N=>b(N)),x=f.useRef(null),y=f.useRef(""),_=h.viewport,S=s.content-s.viewport,E=q(d),C=q(c),k=se(u,10);function T(N){if(x.current){const A=N.clientX-x.current.left,L=N.clientY-x.current.top;m({x:A,y:L})}}return f.useEffect(()=>{const N=A=>{const L=A.target;(g==null?void 0:g.contains(L))&&E(A,S)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[_,g,S,E]),f.useEffect(C,[s,C]),K(g,k),K(h.content,k),o.jsx(lt,{scope:t,scrollbar:g,hasThumb:n,onThumbChange:q(a),onThumbPointerUp:q(l),onThumbPositionChange:C,onThumbPointerDown:q(i),children:o.jsx(te.div,{...p,ref:v,style:{position:"absolute",...p.style},onPointerDown:$(r.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),x.current=g.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",h.viewport&&(h.viewport.style.scrollBehavior="auto"),T(N))}),onPointerMove:$(r.onPointerMove,T),onPointerUp:$(r.onPointerUp,N=>{const A=N.target;A.hasPointerCapture(N.pointerId)&&A.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=y.current,h.viewport&&(h.viewport.style.scrollBehavior=""),x.current=null})})})}),re="ScrollAreaThumb",Se=f.forwardRef((r,e)=>{const{forceMount:t,...s}=r,n=je(re,r.__scopeScrollArea);return o.jsx(ie,{present:t||n.hasThumb,children:o.jsx(it,{ref:e,...s})})}),it=f.forwardRef((r,e)=>{const{__scopeScrollArea:t,style:s,...n}=r,a=M(re,t),l=je(re,t),{onThumbPositionChange:i}=l,c=Z(e,u=>l.onThumbChange(u)),m=f.useRef(void 0),d=se(()=>{m.current&&(m.current(),m.current=void 0)},100);return f.useEffect(()=>{const u=a.viewport;if(u){const p=()=>{if(d(),!m.current){const h=dt(u,i);m.current=h,i()}};return i(),u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[a.viewport,d,i]),o.jsx(te.div,{"data-state":l.hasThumb?"visible":"hidden",...n,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:$(r.onPointerDownCapture,u=>{const p=u.target.getBoundingClientRect(),h=u.clientX-p.left,g=u.clientY-p.top;l.onThumbPointerDown({x:h,y:g})}),onPointerUp:$(r.onPointerUp,l.onThumbPointerUp)})});Se.displayName=re;var pe="ScrollAreaCorner",Ce=f.forwardRef((r,e)=>{const t=M(pe,r.__scopeScrollArea),s=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&s?o.jsx(ct,{...r,ref:e}):null});Ce.displayName=pe;var ct=f.forwardRef((r,e)=>{const{__scopeScrollArea:t,...s}=r,n=M(pe,t),[a,l]=f.useState(0),[i,c]=f.useState(0),m=!!(a&&i);return K(n.scrollbarX,()=>{var u;const d=((u=n.scrollbarX)==null?void 0:u.offsetHeight)||0;n.onCornerHeightChange(d),c(d)}),K(n.scrollbarY,()=>{var u;const d=((u=n.scrollbarY)==null?void 0:u.offsetWidth)||0;n.onCornerWidthChange(d),l(d)}),m?o.jsx(te.div,{...s,ref:e,style:{width:a,height:i,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...r.style}}):null});function oe(r){return r?parseInt(r,10):0}function _e(r,e){const t=r/e;return isNaN(t)?0:t}function ne(r){const e=_e(r.viewport,r.content),t=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,s=(r.scrollbar.size-t)*e;return Math.max(s,18)}function Ee(r,e,t="ltr"){const s=ne(e),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,a=e.scrollbar.size-n,l=e.content-e.viewport,i=a-s,c=Xt(r,t==="ltr"?[0,l]:[-1*l,0]);return Re([0,l],[0,i])(c)}function Re(r,e){return t=>{if(r[0]===r[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(r[1]-r[0]);return e[0]+s*(t-r[0])}}function Te(r,e){return r>0&&r<e}var dt=(r,e=()=>{})=>{let t={left:r.scrollLeft,top:r.scrollTop},s=0;return(function n(){const a={left:r.scrollLeft,top:r.scrollTop},l=t.left!==a.left,i=t.top!==a.top;(l||i)&&e(),t=a,s=window.requestAnimationFrame(n)})(),()=>window.cancelAnimationFrame(s)};function se(r,e){const t=q(r),s=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(s.current),[]),f.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(t,e)},[t,e])}function K(r,e){const t=q(e);Ut(()=>{let s=0;if(r){const n=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(t)});return n.observe(r),()=>{window.cancelAnimationFrame(s),n.unobserve(r)}}},[r,t])}var ke=ve,mt=be,ut=Ce;const Ae=f.forwardRef((r,e)=>{const t=D.c(15);let s,n,a,l,i,c,m,d;return t[0]!==r?({className:n,children:s,...a}=r,t[0]=r,t[1]=s,t[2]=n,t[3]=a):(s=t[1],n=t[2],a=t[3]),t[4]!==n?(l=V("relative overflow-hidden",n),t[4]=n,t[5]=l):l=t[5],t[6]!==s?(i=o.jsx(mt,{className:"h-full w-full rounded-[inherit]",children:s}),t[6]=s,t[7]=i):i=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(c=o.jsx(Pe,{}),m=o.jsx(ut,{}),t[8]=c,t[9]=m):(c=t[8],m=t[9]),t[10]!==a||t[11]!==e||t[12]!==l||t[13]!==i?(d=o.jsxs(ke,{ref:e,className:l,...a,children:[i,c,m]}),t[10]=a,t[11]=e,t[12]=l,t[13]=i,t[14]=d):d=t[14],d});Ae.displayName=ke.displayName;const Pe=f.forwardRef((r,e)=>{const t=D.c(14);let s,n,a;t[0]!==r?({className:s,orientation:a,...n}=r,t[0]=r,t[1]=s,t[2]=n,t[3]=a):(s=t[1],n=t[2],a=t[3]);const l=a===void 0?"vertical":a,i=l==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-px",c=l==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-px";let m,d,u;return t[4]!==s||t[5]!==i||t[6]!==c?(m=V("flex touch-none select-none transition-colors",i,c,s),t[4]=s,t[5]=i,t[6]=c,t[7]=m):m=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(d=o.jsx(Se,{className:"relative flex-1 rounded-full bg-border"}),t[8]=d):d=t[8],t[9]!==l||t[10]!==n||t[11]!==e||t[12]!==m?(u=o.jsx(me,{ref:e,orientation:l,className:m,...n,children:d}),t[9]=l,t[10]=n,t[11]=e,t[12]=m,t[13]=u):u=t[13],u});Pe.displayName=me.displayName;const pt=r=>{var a;const e=D.c(6),{attachment:t}=r;if((a=t.mediaType)!=null&&a.startsWith("image/")){let l;return e[0]!==t.filename||e[1]!==t.url?(l=o.jsx("img",{src:t.url,alt:t.filename,className:"max-h-[100px] max-w-[100px] object-contain mb-1.5"}),e[0]=t.filename,e[1]=t.url,e[2]=l):l=e[2],l}let s,n;return e[3]===Symbol.for("react.memo_cache_sentinel")?(s=o.jsx(Ue,{className:"h-3 w-3 mt-0.5"}),e[3]=s):s=e[3],e[4]!==t.filename?(n=o.jsxs("div",{className:"flex flex-row gap-1 items-center text-xs",children:[s,t.filename]}),e[4]=t.filename,e[5]=n):n=e[5],n},ht=r=>{const e=D.c(12),{file:t,className:s,onRemove:n}=r,[a,l]=f.useState(!1);let i,c,m,d,u;return e[0]!==s?(i=V("py-1 px-1.5 bg-muted rounded-md cursor-pointer flex flex-row gap-1 items-center text-xs",s),e[0]=s,e[1]=i):i=e[1],e[2]===Symbol.for("react.memo_cache_sentinel")?(c=()=>l(!0),m=()=>l(!1),e[2]=c,e[3]=m):(c=e[2],m=e[3]),e[4]!==t||e[5]!==a||e[6]!==n?(d=a?o.jsx(Yt,{className:"h-3 w-3 mt-0.5",onClick:n}):(function(p){const h="h-3 w-3 mt-0.5";return p.type.startsWith("image/")?o.jsx(qr,{className:h}):p.type.startsWith("text/")?o.jsx(Bt,{className:h}):o.jsx(Ue,{className:h})})(t),e[4]=t,e[5]=a,e[6]=n,e[7]=d):d=e[7],e[8]!==t.name||e[9]!==i||e[10]!==d?(u=o.jsxs("div",{className:i,onMouseEnter:c,onMouseLeave:m,children:[d,t.name]}),e[8]=t.name,e[9]=i,e[10]=d,e[11]=u):u=e[11],u},ft="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Ie=[],Le={allowDangerousHtml:!0},xt=/^(https?|ircs?|mailto|xmpp)$/i,gt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function vt(r){const e=(function(s){const n=s.rehypePlugins||Ie,a=s.remarkPlugins||Ie,l=s.remarkRehypeOptions?{...s.remarkRehypeOptions,...Le}:Le;return Qr().use(Kr).use(a).use(Gr,l).use(n)})(r),t=(function(s){const n=s.children||"",a=new Zr;return typeof n=="string"&&(a.value=n),a})(r);return(function(s,n){const a=n.allowedElements,l=n.allowElement,i=n.components,c=n.disallowedElements,m=n.skipHtml,d=n.unwrapDisallowed,u=n.urlTransform||wt;for(const h of gt)Object.hasOwn(n,h.from)&&eo("Unexpected `"+h.from+"` prop, "+(h.to?"use `"+h.to+"` instead":"remove it")+" (see <"+ft+"#"+h.id+"> for more info)");return n.className&&(s={type:"element",tagName:"div",properties:{className:n.className},children:s.type==="root"?s.children:[s]}),to(s,p),ro(s,{Fragment:o.Fragment,components:i,ignoreInvalidStyle:!0,jsx:o.jsx,jsxs:o.jsxs,passKeys:!0,passNode:!0});function p(h,g,b){if(h.type==="raw"&&b&&typeof g=="number")return m?b.children.splice(g,1):b.children[g]={type:"text",value:h.value},g;if(h.type==="element"){let v;for(v in xe)if(Object.hasOwn(xe,v)&&Object.hasOwn(h.properties,v)){const x=h.properties[v],y=xe[v];(y===null||y.includes(h.tagName))&&(h.properties[v]=u(String(x||""),v,h))}}if(h.type==="element"){let v=a?!a.includes(h.tagName):!!c&&c.includes(h.tagName);if(!v&&l&&typeof g=="number"&&(v=!l(h,g,b)),v&&b&&typeof g=="number")return d&&h.children?b.children.splice(g,1,...h.children):b.children.splice(g,1),g}}})(e.runSync(e.parse(t),t),r)}function wt(r){const e=r.indexOf(":"),t=r.indexOf("?"),s=r.indexOf("#"),n=r.indexOf("/");return e===-1||n!==-1&&e>n||t!==-1&&e>t||s!==-1&&e>s||xt.test(r.slice(0,e))?r:""}const bt=[Qt.lineWrapping],yt=new Set(["python","markdown","sql","json","yaml","toml","shell","javascript","typescript","jsx","tsx","css","html"]),jt=r=>{const e=D.c(9),{code:t,language:s}=r,{createNewCell:n}=Kt(),a=Gt(),l=ce(Zt);let i;e[0]!==l||e[1]!==t||e[2]!==n||e[3]!==s||e[4]!==a?(i=()=>{const u=(function(p,h){return p?p==="python"?{language:p,code:h}:p==="sql"?{language:"python",code:tr.fromQuery(h)}:p==="markdown"?{language:"python",code:rr.fromMarkdown(h)}:p==="shell"||p==="bash"?{language:"python",code:`import subprocess
subprocess.run("${h}")`}:{language:"python",code:`_${p} = """
${h}
"""`}:{language:"python",code:h}})(s,t);s==="sql"&&er({autoInstantiate:l,createNewCell:n,fromCellId:a}),n({code:u.code,before:!1,cellId:a??"__end__"})},e[0]=l,e[1]=t,e[2]=n,e[3]=s,e[4]=a,e[5]=i):i=e[5];const c=i;let m,d;return e[6]===Symbol.for("react.memo_cache_sentinel")?(m=o.jsx(no,{className:"ml-2 h-4 w-4"}),e[6]=m):m=e[6],e[7]!==c?(d=o.jsxs(W,{size:"xs",variant:"outline",onClick:c,children:["Add to Notebook",m]}),e[7]=c,e[8]=d):d=e[8],d},Nt=r=>{const e=D.c(20),{code:t,language:s}=r,{theme:n}=$t(),[a,l]=f.useState(t);let i,c,m;e[0]!==t?(i=()=>{l(t)},c=[t],e[0]=t,e[1]=i,e[2]=c):(i=e[1],c=e[2]),f.useEffect(i,c),e[3]!==a?(m=async()=>{await qt(a)},e[3]=a,e[4]=m):m=e[4];const d=m,u=n==="dark"?"dark":"light",p=s&&yt.has(s)?s:void 0;let h,g,b,v,x;return e[5]!==u||e[6]!==p||e[7]!==a?(h=o.jsx(f.Suspense,{children:o.jsx(Jt,{theme:u,language:p,className:"cm border rounded overflow-hidden",extensions:bt,value:a,onChange:l})}),e[5]=u,e[6]=p,e[7]=a,e[8]=h):h=e[8],e[9]!==d?(g=o.jsx(St,{size:"xs",variant:"outline",onClick:d,children:"Copy"}),e[9]=d,e[10]=g):g=e[10],e[11]!==s||e[12]!==a?(b=o.jsx(jt,{code:a,language:s}),e[11]=s,e[12]=a,e[13]=b):b=e[13],e[14]!==g||e[15]!==b?(v=o.jsxs("div",{className:"flex justify-end mt-2 space-x-2",children:[g,b]}),e[14]=g,e[15]=b,e[16]=v):v=e[16],e[17]!==h||e[18]!==v?(x=o.jsxs("div",{className:"relative",children:[h,v]}),e[17]=h,e[18]=v,e[19]=x):x=e[19],x},St=r=>{const e=D.c(12);let t,s;e[0]!==r?({onClick:t,...s}=r,e[0]=r,e[1]=t,e[2]=s):(t=e[1],s=e[2]);const[n,a]=f.useState(!1);let l,i,c;e[3]!==n?(l=()=>{n&&setTimeout(()=>a(!1),1e3)},i=[n],e[3]=n,e[4]=l,e[5]=i):(l=e[4],i=e[5]),f.useEffect(l,i),e[6]!==t?(c=u=>{t==null||t(u),a(!0)},e[6]=t,e[7]=c):c=e[7];const m=n?"Copied":"Copy";let d;return e[8]!==s||e[9]!==c||e[10]!==m?(d=o.jsx(W,{...s,onClick:c,children:m}),e[8]=s,e[9]=c,e[10]=m,e[11]=d):d=e[11],d},Ct={code:({children:r,className:e})=>{const t=e==null?void 0:e.replace("language-","");return t&&typeof r=="string"?o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-muted-foreground pl-1",children:t}),o.jsx(Nt,{code:r.trim(),language:t})]}):o.jsx("code",{className:e,children:r})}},_t=[oo],ze=f.memo(r=>{const e=D.c(2),{content:t}=r;let s;return e[0]!==t?(s=o.jsx(vt,{components:Ct,remarkPlugins:_t,className:"mo-markdown-renderer prose dark:prose-invert max-w-none prose-pre:pl-0",children:t}),e[0]=t,e[1]=s):s=e[1],s},(r,e)=>r.content===e.content);ze.displayName="MemoizedMarkdownBlock";const ae=f.memo(({content:r})=>{const e=f.useMemo(()=>{return t=r,Vt.lexer(t).map(s=>s.raw);var t},[r]);return o.jsx(o.Fragment,{children:e.map((t,s)=>o.jsx(ze,{content:t},`markdown-block-${s}`))})});ae.displayName="MarkdownRenderer";const Et=r=>{const e=D.c(13),{reasoning:t,index:s,isStreaming:n}=r,a=s===void 0?0:s,l=n!==void 0&&n,i=l?"reasoning":void 0;let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=o.jsx(fe,{className:"h-3 w-3"}),e[0]=c):c=e[0];const m=l?"Thinking":"View reasoning";let d,u,p,h;return e[1]!==t.length||e[2]!==m?(d=o.jsx(Xe,{className:"text-xs text-muted-foreground hover:bg-muted/50 px-2 py-1 h-auto rounded-sm [&[data-state=open]>svg]:rotate-180",children:o.jsxs("span",{className:"flex items-center gap-2",children:[c,m," (",t.length," ","chars)"]})}),e[1]=t.length,e[2]=m,e[3]=d):d=e[3],e[4]!==t?(u=o.jsx(Ye,{className:"pb-2 px-2",children:o.jsx("div",{className:"bg-muted/30 border border-muted/50 rounded-md p-3 italic text-muted-foreground/90 relative",children:o.jsx("div",{className:"pr-6",children:o.jsx(ae,{content:t})})})}),e[4]=t,e[5]=u):u=e[5],e[6]!==d||e[7]!==u?(p=o.jsxs(Be,{value:"reasoning",className:"border-0",children:[d,u]}),e[6]=d,e[7]=u,e[8]=p):p=e[8],e[9]!==a||e[10]!==i||e[11]!==p?(h=o.jsx(Ve,{type:"single",collapsible:!0,className:"w-full mb-2",value:i,children:p},a),e[9]=a,e[10]=i,e[11]=p,e[12]=h):h=e[12],h},De=r=>{const e=D.c(32),{toolName:t,result:s,error:n,index:a,state:l}=r,i=a===void 0?0:a,c=l==="output-available"&&(s||n),m=n?"error":c?"success":"loading";let d;e[0]!==m?(d=()=>{switch(m){case"loading":return o.jsx($e,{className:"h-3 w-3 animate-spin"});case"error":return o.jsx(nr,{className:"h-3 w-3 text-destructive"});case"success":return o.jsx($r,{className:"h-3 w-3 text-green-600"});default:return o.jsx(or,{className:"h-3 w-3"})}},e[0]=m,e[1]=d):d=e[1];const u=d;let p;e[2]!==n||e[3]!==c||e[4]!==m?(p=()=>m==="loading"?"Running: ":n?"Failed: ":c?"Done: ":"Tool call",e[2]=n,e[3]=c,e[4]=m,e[5]=p):p=e[5];const h=p,g=`tool-${i}`,b=m==="error"&&"text-destructive/80",v=m==="success"&&"text-green-600/80";let x,y;e[6]!==b||e[7]!==v?(x=V("h-6 text-xs border-border shadow-none! ring-0! bg-muted hover:bg-muted/30 py-0 px-2 gap-1 rounded-sm [&[data-state=open]>svg]:rotate-180",b,v),e[6]=b,e[7]=v,e[8]=x):x=e[8],e[9]!==u?(y=u(),e[9]=u,e[10]=y):y=e[10];const _=h();let S,E,C,k,T,N,A;return e[11]!==t?(S=o.jsx("code",{className:"font-mono text-xs",children:t}),e[11]=t,e[12]=S):S=e[12],e[13]!==S||e[14]!==y||e[15]!==_?(E=o.jsxs("span",{className:"flex items-center gap-1",children:[y,_,":"," ",S]}),e[13]=S,e[14]=y,e[15]=_,e[16]=E):E=e[16],e[17]!==E||e[18]!==x?(C=o.jsx(Xe,{className:x,children:E}),e[17]=E,e[18]=x,e[19]=C):C=e[19],e[20]!==n||e[21]!==c||e[22]!==s?(k=c&&o.jsxs("div",{className:"space-y-3",children:[s!=null&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-medium text-muted-foreground mt-2 mb-1",children:"Result:"}),o.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:typeof s=="string"?s:JSON.stringify(s,null,2)})]}),n&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-medium text-destructive mb-1",children:"Error:"}),o.jsx("div",{className:"bg-destructive/10 border border-destructive/20 rounded-md p-3 text-sm text-destructive",children:n})]})]}),e[20]=n,e[21]=c,e[22]=s,e[23]=k):k=e[23],e[24]!==k?(T=o.jsx(Ye,{className:"pb-2 px-2",children:k}),e[24]=k,e[25]=T):T=e[25],e[26]!==C||e[27]!==T?(N=o.jsxs(Be,{value:"tool-call",className:"border-0",children:[C,T]}),e[26]=C,e[27]=T,e[28]=N):N=e[28],e[29]!==N||e[30]!==g?(A=o.jsx(Ve,{type:"single",collapsible:!0,className:"w-full",children:N},g),e[29]=N,e[30]=g,e[31]=A):A=e[31],A},Rt=new Set(["openai","google","anthropic"]),Tt=["image/*","text/*"],kt=({onNewChat:r,activeChatId:e,setActiveChat:t})=>{const{handleClick:s}=Ze(),n=ce(Ge),a=f.useMemo(()=>[...n.chats.values()].sort((l,i)=>i.updatedAt-l.updatedAt),[n.chats]);return o.jsxs("div",{className:"flex border-b px-2 py-1 justify-between shrink-0 items-center",children:[o.jsx(ee,{content:"New chat",children:o.jsx(W,{variant:"text",size:"icon",onClick:r,children:o.jsx(Mr,{className:"h-4 w-4"})})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ee,{content:"AI Settings",children:o.jsx(W,{variant:"text",size:"xs",className:"hover:bg-foreground/10 py-2",onClick:()=>s("ai"),children:o.jsx(Or,{className:"h-4 w-4"})})}),o.jsxs(Hr,{children:[o.jsx(ee,{content:"Previous chats",children:o.jsx(Wr,{asChild:!0,children:o.jsx(W,{variant:"text",size:"icon",children:o.jsx(Fr,{className:"h-4 w-4"})})})}),o.jsx(Ur,{className:"w-[520px] p-0",align:"start",side:"right",children:o.jsx(Ae,{className:"h-[500px] p-4",children:o.jsxs("div",{className:"space-y-4",children:[a.length===0&&o.jsx(et,{title:"No chats yet",description:"Start a new chat to get started",icon:o.jsx(fe,{})}),a.map(l=>o.jsxs("button",{className:V("w-full p-3 rounded-md cursor-pointer hover:bg-accent text-left",l.id===e&&"bg-accent"),onClick:()=>{t(l.id)},type:"button",children:[o.jsx("div",{className:"font-medium",children:l.title}),o.jsx("div",{className:"text-sm text-muted-foreground",children:Xr(l.updatedAt)})]},l.id))]})})})]})]})]})},Me=f.memo(r=>{const e=D.c(15),{message:t,index:s,onEdit:n,isStreamingReasoning:a,isLast:l}=r;let i;e[0]!==s||e[1]!==n?(i=b=>{var _,S;const v=(_=b.parts)==null?void 0:_.filter(At),x=v==null?void 0:v.map(Pt).join(`
`),y=(S=b.parts)==null?void 0:S.filter(It);return o.jsxs("div",{className:"w-[95%] bg-background border p-1 rounded-sm",children:[y==null?void 0:y.map(Lt),o.jsx(Ke,{value:x,placeholder:"Type your message...",onChange:zt,onSubmit:(E,C)=>{C.trim()&&n(s,C)},onClose:Dt},b.id)]})},e[0]=s,e[1]=n,e[2]=i):i=e[2];const c=i;let m;e[3]!==l||e[4]!==a?(m=b=>{const v=b.parts.filter(Mt).map(Ot).join(`
`);return o.jsxs("div",{className:"w-[95%] break-words",children:[o.jsx("div",{className:"absolute right-1 top-1 opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(Nr,{className:"h-3 w-3",value:v||""})}),b.parts.map((x,y)=>{if((function(_){return _.type.startsWith("tool-")})(x))return o.jsx(De,{index:y,toolName:x.type,result:x.output,state:x.state},y);switch(x.type){case"text":return o.jsx(ae,{content:x.text},y);case"reasoning":return o.jsx(Et,{reasoning:x.text,index:y,isStreaming:l&&a&&y===(b.parts.length||0)-1},y);case"dynamic-tool":return o.jsx(De,{index:y,toolName:x.type,result:x.output,state:x.state},y);case"data-reasoning-signature":return null;default:if(x.type.startsWith("data-"))return J.log("Found data part",x),null;J.error("Unhandled part type:",x.type);try{return o.jsx(ae,{content:JSON.stringify(x,null,2)},y)}catch(_){const S=_;return J.error("Error rendering part:",x.type,S),null}}})]})},e[3]=l,e[4]=a,e[5]=m):m=e[5];const d=m,u=t.role==="user"?"justify-end":"justify-start";let p,h,g;return e[6]!==u?(p=V("flex group relative",u),e[6]=u,e[7]=p):p=e[7],e[8]!==t||e[9]!==d||e[10]!==c?(h=t.role==="user"?c(t):d(t),e[8]=t,e[9]=d,e[10]=c,e[11]=h):h=e[11],e[12]!==p||e[13]!==h?(g=o.jsx("div",{className:p,children:h}),e[12]=p,e[13]=h,e[14]=g):g=e[14],g});Me.displayName="ChatMessage";const Oe=f.memo(r=>{var le;const e=D.c(34),{isEmpty:t,onSendClick:s,isLoading:n,onStop:a,fileInputRef:l,onAddFiles:i,onAddContext:c}=r,m=ce(ar),d=(m==null?void 0:m.mode)||"manual",u=((le=m==null?void 0:m.models)==null?void 0:le.chat_model)||lr,p=ir.parse(u).providerId,{saveModeChange:h}=cr();let g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g=[{value:"ask",label:"Ask",subtitle:"Use AI with access to read-only tools like documentation search"},{value:"manual",label:"Manual",subtitle:"Pure chat, no tool usage"}],e[0]=g):g=e[0];const b=g,v=Rt.has(p);let x,y,_,S,E,C,k,T,N;e[1]!==d?(x=o.jsx(Sr,{className:"h-6 text-xs border-border shadow-none! ring-0! bg-muted hover:bg-muted/30 py-0 px-2 gap-1 capitalize",children:d}),e[1]=d,e[2]=x):x=e[2],e[3]===Symbol.for("react.memo_cache_sentinel")?(y=o.jsx(Cr,{children:"AI Mode"}),e[3]=y):y=e[3],e[4]!==b?(_=o.jsx(dr,{children:o.jsxs(mr,{children:[y,b.map(Ht)]})}),e[4]=b,e[5]=_):_=e[5],e[6]!==d||e[7]!==h||e[8]!==x||e[9]!==_?(S=o.jsx(_r,{feature:"mcp_docs",children:o.jsxs(Er,{value:d,onValueChange:h,children:[x,_]})}),e[6]=d,e[7]=h,e[8]=x,e[9]=_,e[10]=S):S=e[10],e[11]===Symbol.for("react.memo_cache_sentinel")?(E=o.jsx(Rr,{placeholder:"Model",triggerClassName:"h-6 text-xs shadow-none! ring-0! bg-muted hover:bg-muted/30 rounded-sm",iconSize:"small",showAddCustomModelDocs:!0,forRole:"chat"}),e[11]=E):E=e[11],e[12]!==S?(C=o.jsxs("div",{className:"flex items-center gap-2",children:[S,E]}),e[12]=S,e[13]=C):C=e[13],e[14]===Symbol.for("react.memo_cache_sentinel")?(k=o.jsx(Tr,{className:"h-3.5 w-3.5"}),e[14]=k):k=e[14],e[15]!==c?(T=o.jsx(ee,{content:"Add context",children:o.jsx(W,{variant:"text",size:"icon",onClick:c,children:k})}),e[15]=c,e[16]=T):T=e[16],e[17]!==l||e[18]!==v||e[19]!==i?(N=v&&o.jsxs(o.Fragment,{children:[o.jsx(ee,{content:"Attach a file",children:o.jsx(W,{variant:"text",size:"icon",className:"cursor-pointer",onClick:()=>{var U;return(U=l.current)==null?void 0:U.click()},title:"Attach a file",children:o.jsx(kr,{className:"h-3.5 w-3.5"})})}),o.jsx(Ar,{ref:l,type:"file",multiple:!0,hidden:!0,onChange:U=>{U.target.files&&i([...U.target.files])},accept:Tt.join(",")})]}),e[17]=l,e[18]=v,e[19]=i,e[20]=N):N=e[20];const A=n?a:s,L=!n&&t;let X,Y,B,G;return e[21]!==n?(X=n?o.jsx(Pr,{className:"h-3 w-3 fill-current"}):o.jsx(Ir,{className:"h-3 w-3"}),e[21]=n,e[22]=X):X=e[22],e[23]!==A||e[24]!==L||e[25]!==X?(Y=o.jsx(ee,{content:"Submit",children:o.jsx(W,{variant:"text",size:"sm",className:"h-6 w-6 p-0 hover:bg-muted/30 cursor-pointer",onClick:A,disabled:L,children:X})}),e[23]=A,e[24]=L,e[25]=X,e[26]=Y):Y=e[26],e[27]!==N||e[28]!==Y||e[29]!==T?(B=o.jsxs("div",{className:"flex flex-row",children:[T,N,Y]}),e[27]=N,e[28]=Y,e[29]=T,e[30]=B):B=e[30],e[31]!==B||e[32]!==C?(G=o.jsx(Qe,{children:o.jsxs("div",{className:"px-3 py-2 border-t border-border/20 flex flex-row items-center justify-between",children:[C,B]})}),e[31]=B,e[32]=C,e[33]=G):G=e[33],G});Oe.displayName="ChatInputFooter";const he=f.memo(r=>{const e=D.c(29),{placeholder:t,input:s,inputClassName:n,setInput:a,onSubmit:l,inputRef:i,isLoading:c,onStop:m,fileInputRef:d,onAddFiles:u,onClose:p}=r;let h;e[0]!==s||e[1]!==l?(h=()=>{s.trim()&&l(void 0,s)},e[0]=s,e[1]=l,e[2]=h):h=e[2];const g=Q(h);let b;e[3]!==n?(b=V("px-2 py-3 flex-1",n),e[3]=n,e[4]=b):b=e[4];const v=t||"Type your message...";let x,y;e[5]!==s||e[6]!==i||e[7]!==u||e[8]!==p||e[9]!==l||e[10]!==a||e[11]!==v?(x=o.jsx(Ke,{inputRef:i,value:s,onChange:a,onSubmit:l,onClose:p,onAddFiles:u,placeholder:v}),e[5]=s,e[6]=i,e[7]=u,e[8]=p,e[9]=l,e[10]=a,e[11]=v,e[12]=x):x=e[12],e[13]!==b||e[14]!==x?(y=o.jsx("div",{className:b,children:x}),e[13]=b,e[14]=x,e[15]=y):y=e[15];const _=!s.trim();let S,E,C;return e[16]!==i?(S=()=>Lr(i),e[16]=i,e[17]=S):S=e[17],e[18]!==d||e[19]!==g||e[20]!==c||e[21]!==u||e[22]!==m||e[23]!==_||e[24]!==S?(E=o.jsx(Oe,{isEmpty:_,onAddContext:S,onSendClick:g,isLoading:c,onStop:m,fileInputRef:d,onAddFiles:u}),e[18]=d,e[19]=g,e[20]=c,e[21]=u,e[22]=m,e[23]=_,e[24]=S,e[25]=E):E=e[25],e[26]!==y||e[27]!==E?(C=o.jsxs("div",{className:"relative shrink-0 min-h-[80px] flex flex-col border-t",children:[y,E]}),e[26]=y,e[27]=E,e[28]=C):C=e[28],C});he.displayName="ChatInput";let He;tt=()=>{const r=D.c(6),e=ce(sr),{handleClick:t}=Ze();if(!e){let n,a,l;return r[0]!==t?(n=o.jsx(W,{variant:"outline",size:"sm",onClick:()=>t("ai"),children:"Edit AI settings"}),r[0]=t,r[1]=n):n=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(a=o.jsx(fe,{}),r[2]=a):a=r[2],r[3]!==n?(l=o.jsx(et,{title:"Chat with AI",description:"AI is currently disabled. Add your API key to enable.",action:n,icon:a}),r[3]=n,r[4]=l):l=r[4],l}let s;return r[5]===Symbol.for("react.memo_cache_sentinel")?(s=o.jsx(He,{}),r[5]=s):s=r[5],s},He=()=>{const r=ur(Ge),[e,t]=pr(Br),[s,n]=f.useState(""),[a,l]=f.useState(""),[i,c]=f.useState(),m=f.useRef(null),d=f.useRef(null),u=f.useRef(null),p=f.useRef(null),h=f.useRef(null),g=hr(),{invokeAiTool:b}=fr(),v=e==null?void 0:e.id,{messages:x,sendMessage:y,error:_,status:S,regenerate:E,stop:C,addToolResult:k,id:T}=xr({id:v,sendAutomaticallyWhen:({messages:w})=>{var I;if(w.length===0)return!1;const j=w[w.length-1],R=j.parts;if(R.length===0||j.role!=="assistant")return!1;const z=R.filter(H=>H.type.startsWith("tool-")).some(H=>H.state==="output-available"),O=R[R.length-1],P=O.type==="text"&&((I=O.text)==null?void 0:I.trim().length)>0;return z&&!P},messages:(e==null?void 0:e.messages)||[],transport:new gr({api:g.getAiURL("chat").toString(),headers:g.headers(),prepareSendMessagesRequest:async w=>{function j(P){return P.map(I=>I.type==="text"?I.text:"").join(`
`)}const R=j(w.messages.flatMap(P=>P.parts)),z=await vr({input:R});function O(P,I){const H=P.parts;return I&&H.push(...z.attachments),{role:P.role,content:j(P.parts),parts:H}}return{body:{...w,...z.body,messages:w.messages.map((P,I)=>({...P,...O(P,I===w.messages.length-1)}))}}}}),onFinish:({messages:w})=>{r(j=>(({chatState:R,chatId:z,messages:O})=>{if(!z)return J.warn("No active chat"),R;const P=R.chats.get(z);if(!P)return J.warn("No active chat"),R;const I=new Map(R.chats),H=Date.now();return I.set(P.id,{...P,messages:O,updatedAt:H}),{...R,chats:I}})({chatState:j,chatId:j.activeChatId,messages:w}))},onToolCall:async({toolCall:w})=>{try{const j=await b({toolName:w.toolName,arguments:w.input});k({tool:w.toolName,toolCallId:w.toolCallId,output:j.result||j.error})}catch(j){J.error("Tool call failed:",j),k({tool:w.toolName,toolCallId:w.toolCallId,output:`Error: ${j instanceof Error?j.message:String(j)}`})}},onError:w=>{J.error("An error occurred:",w)}}),N=Q(w=>{if(w.length===0)return;let j=0;for(const R of w)j+=R.size;j>52428800?wr({title:"File size exceeds 50MB limit",description:"Please remove some files and try again."}):c(R=>[...R??[],...w])}),A=Q(w=>{i&&c(i.filter(j=>j!==w))}),L=S==="submitted"||S==="streaming",X=L&&x.length>0&&br(x);f.useEffect(()=>{requestAnimationFrame(()=>{if(u.current){const w=u.current;w.scrollTop=w.scrollHeight}})},[v]);const Y=Q(()=>{t(null),n(""),l(""),c(void 0)}),B=Q((w,j)=>{var P;const R=x[w],z=(P=R.parts)==null?void 0:P.filter(I=>I.type==="file"),O=R.id;y({messageId:O,role:"user",parts:[{type:"text",text:j},...z]})}),G=Q(async(w,j)=>{var z;if(!j.trim())return;(z=d.current)!=null&&z.view&&qe(d.current.view);const R=i?await Je(i):void 0;w==null||w.preventDefault(),y({text:j,files:R}),n(""),c(void 0)}),le=Q(()=>{var w;a.trim()&&((w=m.current)!=null&&w.view&&qe(m.current.view),(async(j,R)=>{const z=Date.now(),O={id:T,title:zr(j),messages:[],createdAt:z,updatedAt:z};r(I=>{const H=new Map(I.chats);return H.set(O.id,O),{...I,chats:H,activeChatId:O.id}});const P=R&&R.length>0?await Je(R):void 0;y({role:"user",parts:[{type:"text",text:j},...P??[]]}),c(void 0),n("")})(a.trim(),i))}),U=x.length===0,We=U?o.jsx(he,{placeholder:`Ask anything, ${Dr} to include context about tables or dataframes`,input:a,inputRef:m,inputClassName:"px-1 py-0",setInput:l,onSubmit:le,isLoading:L,onStop:C,fileInputRef:p,onAddFiles:N,onClose:()=>{var w,j;return(j=(w=m.current)==null?void 0:w.editor)==null?void 0:j.blur()}},"new-thread-input"):o.jsx(he,{input:s,setInput:n,onSubmit:G,inputRef:d,isLoading:L,onStop:C,onClose:()=>{var w,j;return(j=(w=d.current)==null?void 0:w.editor)==null?void 0:j.blur()},fileInputRef:p,onAddFiles:N}),Fe=i&&i.length>0&&o.jsx("div",{className:V("flex flex-row gap-1 flex-wrap p-1",U&&"py-2 px-1"),children:i==null?void 0:i.map(w=>o.jsx(ht,{file:w,onRemove:()=>A(w)},w.name))});return o.jsxs("div",{className:"flex flex-col h-[calc(100%-53px)]",children:[o.jsx(Qe,{children:o.jsx(kt,{onNewChat:Y,activeChatId:e==null?void 0:e.id,setActiveChat:t})}),o.jsxs("div",{className:"flex-1 px-3 bg-(--slate-1) gap-4 py-3 flex flex-col overflow-y-auto",ref:u,children:[U&&o.jsxs("div",{className:"rounded-md border bg-background",children:[Fe,We]}),x.map((w,j)=>o.jsx(Me,{message:w,index:j,onEdit:B,isStreamingReasoning:X,isLast:j===x.length-1},w.id)),L&&o.jsx("div",{className:"flex justify-center py-4",children:o.jsx($e,{className:"h-4 w-4 animate-spin"})}),_&&o.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[o.jsx(yr,{error:_}),o.jsx(W,{variant:"outline",size:"sm",onClick:()=>{E()},children:"Retry"})]}),o.jsx("div",{ref:h})]}),L&&o.jsx("div",{className:"w-full flex justify-center items-center z-20 border-t",children:o.jsx(W,{variant:"linkDestructive",size:"sm",onClick:C,children:"Stop"})}),!U&&o.jsxs(o.Fragment,{children:[Fe,We]})]})};function At(r){return r.type==="text"}function Pt(r){return r.text}function It(r){return r.type==="file"}function Lt(r,e){return o.jsx(pt,{attachment:r},e)}function zt(){}function Dt(){}function Mt(r){return r.type==="text"}function Ot(r){return r.text}function Ht(r){return o.jsx(jr,{value:r.value,className:"text-xs",children:o.jsxs("div",{className:"flex flex-col",children:[r.label,o.jsx("div",{className:"text-muted-foreground text-xs pt-1 block",children:r.subtitle})]})},r.value)}});export{ao as __tla,tt as default};
